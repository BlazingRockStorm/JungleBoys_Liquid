<h2> Find Rooms</h2>
<br>
<div class="row">
<%= search_form_for @q do |f| %>
  <div class="form-group">
  <%= f.label :cost_per_night_lteq, "Max cost" %>
  <%= f.search_field :cost_per_night_lteq %>
  <%= f.label :cost_per_night_lteq, "Min cost" %>
  <%= f.search_field :cost_per_night_gteq %>
  <div>
  <%= f.label :type_of_room_eq, "Type of room:" %>
  <%= f.select :type_of_room_eq, options_for_select([["Homestay", 0], ["Hotel", 1]], params[:q][:type_of_room_eq]), :include_blank => true, :class=>"form-control" %>
  <%= f.label :province_cont, "Province or City" %> 
  <%= f.select :province_cont, options_for_select($CITYS, :selected => params[:q][:province_cont]), :include_blank => true, :class=>"form-control" %>
  <%= f.submit "OK", class: 'btn btn-default' %>
<% end %>
</div>
<br>
<%= sort_link(@q, :cost_per_night) %>
<%= sort_link(@q, :id) %>
  
<div class="row">
  <% @rooms.each do |room| %>
    <div class="col-md-4">
      <div class="card border-0" style="width: 100%;">
        <!--<div class="card-body">-->
         <%= image_tag(room.pictures[0], :alt=>'Room image', :width=>"100%", :class => "index-room-img") %>
         <ul class="homepage-info">
            <p class="right-corner" style="font-size: 1rem; font-weight: bold">$<%= room.cost_per_night %>/night </p>
            <h5 style="font-weight: bold"><%= room.room_name %></h5>
            <li>Address: <%= room.address %></li>
            <li>Contact: <%= room.contact_host %></li>
            <li>Reviews: <%= room.comments.count %> Reviews</li>
             <!--to fix-->
            <li><%= link_to "More detail", room_path(room.id) %></li>
            
          <br>
          
          <li>
            <% if !room.ratings.blank? %>
              <% for i in 1..5 %>
                  <% if i > room.ratings.average(:stars) %>
                  <i class="fas fa-star"></i>
                  <% else %>
                  <i class="fas fa-star rated"></i>
                  <% end %>
              <% end %>
              <%= number_with_precision(room.ratings.average(:stars), :precision => 1) %>
              <% else %>
            No ratings.
            <% end %>
          </li>
          </ul>
        <!--</div>-->
      </div>
    </div>
  <% end %>
  
</div>
